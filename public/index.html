<!DOCTYPE html>
<html>
<head>
  <title>Height Predictor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Bootstrap & Chart.js -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background: linear-gradient(to right, #a1c4fd, #c2e9fb);
      font-family: 'Segoe UI', sans-serif;
      transition: background 0.4s ease, color 0.4s ease;
    }

    body.dark-mode {
      background: #121212;
      color: #f0f0f0;
    }

    .container {
      max-width: 600px;
      margin-top: 60px;
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    .dark-mode .container {
      background: #1e1e1e;
      box-shadow: 0 0 10px rgba(255,255,255,0.1);
    }

    #result {
      font-size: 20px;
      color: #28a745;
      text-align: center;
      margin-top: 20px;
    }

    #dark-toggle {
      float: right;
      cursor: pointer;
    }

    .tooltip-custom {
      border-bottom: 1px dotted #555;
      cursor: help;
    }
 #result {
  font-size: 20px;
  color: #28a745;
  text-align: center;
  margin-top: 20px;
  opacity: 0;
  transform: scale(0.9);
  transition: all 0.4s ease;
}

#result.show {
  opacity: 1;
  transform: scale(1.05);
}


  </style>
</head>
<body>
  <div class="container">
    <h2>üîç Predict Your Height! 
      <span id="dark-toggle" class="btn btn-outline-secondary btn-sm">üåì Dark Mode</span>
    </h2>

    <p class="tooltip-custom" title="We use a simple linear regression ML model trained on weight and height data.">
      üß† How does this work?
    </p>

    <div class="form-group mb-3">
      <label for="weight" class="form-label">Enter weight (lbs):</label>
      <input type="number" class="form-control" id="weight" placeholder="e.g. 150">
    </div>

    <button class="btn btn-success w-100" id="predict-btn">Predict Height</button>

    <h3 id="result"></h3>

    <canvas id="chart" height="100" style="margin-top: 40px;"></canvas>
  </div>

  <!-- JavaScript -->
  <script>
    const darkToggle = document.getElementById('dark-toggle');
    darkToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
    });

    const ctx = document.getElementById('chart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: [],
        datasets: [{
          label: 'Predicted Height (inches)',
          data: [],
          borderColor: '#4CAF50',
          borderWidth: 2,
          fill: false,
          tension: 0.3
        }]
      },
      options: {
        scales: {
          x: { title: { display: true, text: 'Weight (lbs)' }},
          y: { title: { display: true, text: 'Height (inches)' }}
        }
      }
    });

    document.getElementById('predict-btn').addEventListener('click', async () => {
      const weight = parseFloat(document.getElementById('weight').value);

      if (!weight || weight < 0) {
        alert('Please enter a valid positive weight!');
        return;
      }

      const response = await fetch('/predict', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ weight })
      });

      const data = await response.json();
      const height = data.predicted_height;

      document.getElementById('result').innerText = `üìè Predicted Height: ${height} inches`;

      // Add to chart
      chart.data.labels.push(weight);
      chart.data.datasets[0].data.push(height);
      chart.update();
    });
  </script>
</body>
</html>
